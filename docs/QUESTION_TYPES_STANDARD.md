# Question Types Standard

This document defines the standardized question types and data structures used across the reading and listening exercises.

## Backend Question Types

The backend generates the following 6 question types with these exact type identifiers:

1. **`multiple_choice`** - Select one correct answer from 4 options
2. **`true_false`** - Determine if a statement is true or false
3. **`fill_in_the_blanks`** - Complete sentences with missing words
4. **`match_the_following`** - Match items from two columns
5. **`sentence_reordering`** - Arrange sentences in correct order
6. **`short_answer`** - Provide a brief written response

## Question Data Structure

### Backend Structure (Generated by AI and stored in database)

```typescript
interface BackendQuestion {
  question_number: number;
  type: 'multiple_choice' | 'true_false' | 'fill_in_the_blanks' | 
        'match_the_following' | 'sentence_reordering' | 'short_answer';
  question: string;
  points: number;
  explanation: string;
  
  // Type-specific fields:
  
  // multiple_choice
  options?: string[];           // Array of 4 options
  correct_index?: number;        // Index of correct option (0-3)
  correct_answer?: string;       // The correct option text
  
  // true_false
  correct_answer?: 'true' | 'false';
  
  // fill_in_the_blanks
  blanks?: Array<{ text: string }>;  // Array of correct answers for blanks
  correct_answer?: string;            // JSON string of answers
  
  // match_the_following
  pairs?: Array<{ left: string; right: string }>;
  correct_answer?: string;       // JSON string of correct matches
  
  // sentence_reordering
  sentences?: string[];          // Array of sentences to reorder
  correct_answer?: string;       // JSON string of correct order indices
  
  // short_answer
  correct_answer?: string;       // Expected answer or sample answer
}
```

### Frontend Structure (Used by QuestionRenderer)

```typescript
interface FrontendQuestion {
  id: string | number;
  type: string;
  question: string;
  options: string[];
  correct_answer: string;
  sample_answer: string;
  points: number;
  
  // Additional fields for complex types
  pairs?: Array<{ left: string; right: string }>;
  sentences?: string[];
  blanks?: Array<{ text: string; options?: string[] }>;
}
```

## Database Storage

Questions are stored in the `luna_quiz_questions` table with:
- `task_id`: Links to the exercise
- `question_number`: Sequential order
- `type`: Question type identifier
- `data`: JSONB containing the full question object
- `points`: Point value
- `explanation`: Explanation text

## Frontend Components

### QuestionRenderer Component Mapping

The `QuestionRenderer` component maps types to specific renderers:

- `multiple_choice` → `MultipleChoiceRenderer`
- `true_false` → `TrueFalseRenderer`
- `fill_in_the_blanks` → `FillInBlanksRenderer`
- `match_the_following` → `MatchingRenderer`
- `sentence_reordering` → `SentenceOrderingRenderer`
- `short_answer` → `ShortAnswerRenderer`

## Implementation Notes

1. **Type Consistency**: Always use the exact type identifiers listed above
2. **Data Transformation**: The reading/listening pages transform backend format to frontend format
3. **Backwards Compatibility**: Support legacy formats during transformation
4. **Point Values**: Default points per type:
   - multiple_choice: 1 point
   - true_false: 1 point
   - fill_in_the_blanks: 1 point
   - match_the_following: 1 point
   - sentence_reordering: 2 points
   - short_answer: 3 points

## API Endpoints

- **Generate Quiz**: `/api/generate-quiz` - Creates questions from content
- **Reading Exercise**: `/api/reading-exercise` - Fetches reading exercises
- **Create Reading Quiz**: `/api/assignment-instructions/create-reading-quiz`
- **Create Listening Quiz**: `/api/assignment-instructions/create-listening-quiz`